<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0d0d0d;
            --bg-secondary: #161616;
            --bg-tertiary: #1f1f1f;
            --text-primary: #f0f0f0;
            --text-secondary: #888;
            --accent-run: #e85d04;
            --accent-strength: #4cc9f0;
            --accent-info: #a855f7;
            --accent-run-dim: rgba(232, 93, 4, 0.15);
            --accent-strength-dim: rgba(76, 201, 240, 0.15);
            --accent-info-dim: rgba(168, 85, 247, 0.15);
            --border: #2a2a2a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 2rem;
            line-height: 1.6;
        }

        .container {
            max-width: 720px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 0.25rem;
        }

        .subtitle {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .mode-toggle {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .mode-btn {
            flex: 1;
            padding: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            font-family: 'Outfit', sans-serif;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .mode-btn:first-child {
            border-radius: 8px 0 0 8px;
        }

        .mode-btn:last-child {
            border-radius: 0 8px 8px 0;
        }

        .mode-btn:hover {
            background: var(--bg-tertiary);
        }

        .mode-btn.active[data-mode="running"] {
            background: var(--accent-run-dim);
            border-color: var(--accent-run);
            color: var(--accent-run);
        }

        .mode-btn.active[data-mode="strength"] {
            background: var(--accent-strength-dim);
            border-color: var(--accent-strength);
            color: var(--accent-strength);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: flex;
            gap: 1rem;
        }

        .form-row .form-group {
            flex: 1;
        }

        label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        select, input[type="text"] {
            width: 100%;
            padding: 0.875rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
        }

        select {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23888' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
        }

        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--text-secondary);
        }

        .generate-btn {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 6px;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .running-section .generate-btn {
            background: var(--accent-run);
            color: var(--bg-primary);
        }

        .running-section .generate-btn:hover {
            filter: brightness(1.1);
        }

        .strength-section .generate-btn {
            background: var(--accent-strength);
            color: var(--bg-primary);
        }

        .strength-section .generate-btn:hover {
            filter: brightness(1.1);
        }

        .results {
            margin-top: 2.5rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }

        .results-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .workout-option {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            transition: border-color 0.2s ease;
        }

        .workout-option:hover {
            border-color: var(--text-secondary);
        }

        .workout-option.running-workout {
            border-left: 3px solid var(--accent-run);
        }

        .workout-option.strength-workout {
            border-left: 3px solid var(--accent-strength);
        }

        .workout-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
        }

        .workout-details {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            white-space: pre-line;
        }

        .workout-notes {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .hidden {
            display: none !important;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--accent-strength);
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            font-size: 0.9rem;
            color: var(--text-primary);
            text-transform: none;
            letter-spacing: normal;
            cursor: pointer;
        }

        /* Goal splits display */
        .splits-display {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
        }

        .splits-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .splits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 0.75rem;
        }

        .split-item {
            display: flex;
            flex-direction: column;
        }

        .split-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .split-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            color: var(--accent-run);
        }

        .no-splits {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* RPE Guide */
        .rpe-guide {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
        }

        .rpe-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .rpe-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .rpe-value {
            color: var(--accent-strength);
            font-weight: 500;
        }

        /* Info/Sources section */
        .info-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            margin-top: 2rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .info-toggle:hover {
            border-color: var(--accent-info);
            color: var(--accent-info);
        }

        .info-toggle svg {
            width: 18px;
            height: 18px;
        }

        .info-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-top: none;
            border-radius: 0 0 6px 6px;
            padding: 1.25rem;
            margin-top: -6px;
        }

        .info-content h3 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .info-content p, .info-content li {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .info-content ul {
            margin-left: 1.25rem;
            margin-bottom: 1rem;
        }

        @media (max-width: 600px) {
            body {
                padding: 1.25rem;
            }

            h1 {
                font-size: 1.25rem;
            }

            .workout-option {
                padding: 1rem;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .splits-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Workout Generator</h1>
            <div class="subtitle">Goal-pace anchored • Settings saved locally</div>
        </header>

        <div class="mode-toggle">
            <button class="mode-btn active" data-mode="running" onclick="switchMode('running')">Running</button>
            <button class="mode-btn" data-mode="strength" onclick="switchMode('strength')">Strength</button>
        </div>

        <!-- RUNNING SECTION -->
        <div id="running-section" class="section running-section active">
            
            <!-- Goal Input -->
            <div class="form-row">
                <div class="form-group">
                    <label>Goal Event</label>
                    <select id="goal-event">
                        <option value="800">800m</option>
                        <option value="1500">1500m</option>
                        <option value="mile" selected>Mile</option>
                        <option value="3k">3K</option>
                        <option value="5k">5K</option>
                        <option value="10k">10K</option>
                        <option value="half">Half Marathon</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Goal Time (mm:ss or h:mm:ss)</label>
                    <input type="text" id="goal-time" placeholder="e.g. 5:00 or 1:29:30">
                </div>
            </div>

            <!-- Calculated Splits Display -->
            <div id="splits-display" class="splits-display">
                <div class="splits-header">Goal Splits</div>
                <div id="splits-content" class="no-splits">
                    Enter a goal time to see your target splits
                </div>
            </div>

            <div class="form-group">
                <label>Session Type</label>
                <select id="running-type">
                    <option value="hill-power">Hill Power</option>
                    <option value="hill-sustained">Hill Sustained</option>
                    <option value="track-pure-speed">Track – Pure Speed</option>
                    <option value="track-race-prep">Track – Race Prep</option>
                    <option value="tempo">Tempo / Threshold</option>
                    <option value="long-run">Long Run</option>
                </select>
            </div>
            
            <button class="generate-btn" onclick="generateRunning()">Generate Options</button>
            <div id="running-results" class="results hidden"></div>
        </div>

        <!-- STRENGTH SECTION -->
        <div id="strength-section" class="section strength-section">
            
            <div class="form-group">
                <label>Training Phase</label>
                <select id="training-phase">
                    <option value="maintenance">Maintenance – Preserve strength during heavy running</option>
                    <option value="building">Building – Progressive overload, more volume</option>
                </select>
            </div>

            <!-- RPE Guide -->
            <div class="rpe-guide">
                <div class="rpe-header">Intensity Guide (RPE)</div>
                <div id="rpe-content" class="rpe-description">
                    <strong class="rpe-value">Maintenance:</strong> Work at RPE 6-7. Sets should feel solid but sustainable—you could do 2-3 more reps if needed.
                </div>
            </div>

            <div class="form-group">
                <label>Session Type</label>
                <select id="strength-type">
                    <option value="upper">Upper Body</option>
                    <option value="lower">Lower Body</option>
                    <option value="full">Full Body</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Equipment</label>
                <select id="equipment">
                    <option value="bars">Pull-up Bar</option>
                    <option value="dumbbells">Dumbbells</option>
                    <option value="gym">Full Gym</option>
                </select>
            </div>
            
            <div id="dip-bars-option" class="checkbox-group hidden">
                <input type="checkbox" id="has-dip-bars">
                <label for="has-dip-bars">Dip bars available</label>
            </div>
            
            <button class="generate-btn" onclick="generateStrength()">Generate Options</button>
            <div id="strength-results" class="results hidden"></div>
        </div>

        <!-- INFO SECTION -->
        <div class="info-toggle" onclick="toggleInfo()">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>How This Works</span>
        </div>
        <div id="info-content" class="info-content hidden">
            <h3>Pace Targets</h3>
            <p>Workouts reference your goal race pace rather than calculating paces from a recent race result. Enter your goal event and target time to see relevant splits.</p>
            <ul>
                <li><strong>Goal pace:</strong> Your target splits for the goal event</li>
                <li><strong>Faster than goal:</strong> Speed reserve work</li>
                <li><strong>Effort-based:</strong> Threshold, 5K effort, easy—by feel</li>
            </ul>
            
            <h3>Recovery &amp; Rest</h3>
            <p>Shorter, faster efforts generally need more recovery to maintain quality. Rest intervals in strength workouts scale with how heavy you're lifting. Adjust based on how you feel.</p>
        </div>
    </div>

    <script>
        // =====================================================
        // GOAL PACE CALCULATIONS
        // =====================================================

        // Event distances in meters
        const eventDistances = {
            '800': 800,
            '1500': 1500,
            'mile': 1609.34,
            '3k': 3000,
            '5k': 5000,
            '10k': 10000,
            'half': 21097
        };

        // Current goal data
        let currentGoal = null;

        function parseTime(timeStr) {
            if (!timeStr) return null;
            const parts = timeStr.trim().split(':').map(Number);
            if (parts.some(isNaN)) return null;
            
            if (parts.length === 2) {
                return parts[0] * 60 + parts[1];
            } else if (parts.length === 3) {
                return parts[0] * 3600 + parts[1] * 60 + parts[2];
            }
            return null;
        }

        function formatTime(seconds) {
            if (seconds < 60) {
                return seconds.toFixed(0) + 's';
            } else if (seconds < 3600) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.round(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            } else {
                const hrs = Math.floor(seconds / 3600);
                const mins = Math.floor((seconds % 3600) / 60);
                const secs = Math.round(seconds % 60);
                return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
        }

        function formatPace(secondsPerMile) {
            const mins = Math.floor(secondsPerMile / 60);
            const secs = Math.round(secondsPerMile % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}/mi`;
        }

        function calculateGoalSplits(eventKey, totalSeconds) {
            const distance = eventDistances[eventKey];
            if (!distance || !totalSeconds) return null;

            const pacePerMeter = totalSeconds / distance;
            
            return {
                event: eventKey,
                totalTime: totalSeconds,
                distance: distance,
                pacePerMeter: pacePerMeter,
                splits: {
                    '200m': pacePerMeter * 200,
                    '400m': pacePerMeter * 400,
                    '600m': pacePerMeter * 600,
                    '800m': pacePerMeter * 800,
                    '1000m': pacePerMeter * 1000,
                    '1200m': pacePerMeter * 1200,
                    'mile': pacePerMeter * 1609.34
                },
                // Relative paces
                fasterPer400: pacePerMeter * 400 - 4, // 4 seconds faster per 400m
                slowerPer400: pacePerMeter * 400 + 4  // 4 seconds slower per 400m
            };
        }

        function updateSplits() {
            const eventEl = document.getElementById('goal-event');
            const timeEl = document.getElementById('goal-time');
            const splitsContent = document.getElementById('splits-content');
            
            const event = eventEl.value;
            const timeStr = timeEl.value;
            
            if (!timeStr) {
                splitsContent.innerHTML = '<span class="no-splits">Enter a goal time to see your target splits</span>';
                currentGoal = null;
                return;
            }
            
            const totalSeconds = parseTime(timeStr);
            if (!totalSeconds) {
                splitsContent.innerHTML = '<span class="no-splits">Invalid time format. Use mm:ss or h:mm:ss</span>';
                currentGoal = null;
                return;
            }
            
            currentGoal = calculateGoalSplits(event, totalSeconds);
            if (!currentGoal) {
                splitsContent.innerHTML = '<span class="no-splits">Could not calculate splits</span>';
                return;
            }

            // Determine which splits to show based on event
            let splitsHtml = '<div class="splits-grid">';
            
            if (['800', '1500', 'mile'].includes(event)) {
                // Short events: show 200m, 400m, 600m, 800m
                splitsHtml += `
                    <div class="split-item">
                        <span class="split-label">200m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['200m'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">400m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['400m'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">600m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['600m'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">800m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['800m'])}</span>
                    </div>
                `;
            } else if (['3k', '5k'].includes(event)) {
                // Medium events: show 400m, 800m, 1000m, mile pace
                splitsHtml += `
                    <div class="split-item">
                        <span class="split-label">400m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['400m'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">800m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['800m'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">1000m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['1000m'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">Mile</span>
                        <span class="split-value">${formatTime(currentGoal.splits['mile'])}</span>
                    </div>
                `;
            } else {
                // Long events: show 800m, 1000m, mile pace, per-mile pace
                splitsHtml += `
                    <div class="split-item">
                        <span class="split-label">800m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['800m'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">1000m</span>
                        <span class="split-value">${formatTime(currentGoal.splits['1000m'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">Mile</span>
                        <span class="split-value">${formatTime(currentGoal.splits['mile'])}</span>
                    </div>
                    <div class="split-item">
                        <span class="split-label">Pace</span>
                        <span class="split-value">${formatPace(currentGoal.splits['mile'])}</span>
                    </div>
                `;
            }
            
            splitsHtml += '</div>';
            splitsContent.innerHTML = splitsHtml;
        }

        // Event listeners for splits calculation
        document.getElementById('goal-event').addEventListener('change', updateSplits);
        document.getElementById('goal-time').addEventListener('blur', updateSplits);
        document.getElementById('goal-time').addEventListener('keyup', function(e) {
            if (e.key === 'Enter') updateSplits();
        });

        // =====================================================
        // MODE SWITCHING
        // =====================================================

        function switchMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            document.querySelector(`.mode-btn[data-mode="${mode}"]`).classList.add('active');
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(`${mode}-section`).classList.add('active');
        }

        // =====================================================
        // EQUIPMENT & PHASE HANDLING
        // =====================================================

        function updateDipBarsVisibility() {
            const equipment = document.getElementById('equipment').value;
            const dipBarsOption = document.getElementById('dip-bars-option');
            if (equipment === 'bars') {
                dipBarsOption.classList.remove('hidden');
            } else {
                dipBarsOption.classList.add('hidden');
            }
        }

        function updateRpeGuide() {
            const phase = document.getElementById('training-phase').value;
            const rpeContent = document.getElementById('rpe-content');
            
            if (phase === 'maintenance') {
                rpeContent.innerHTML = '<strong class="rpe-value">Maintenance:</strong> Work at RPE 6-7. Sets should feel solid but sustainable—you could do 2-3 more reps if needed. Preserve strength without accumulating fatigue.';
            } else {
                rpeContent.innerHTML = '<strong class="rpe-value">Building:</strong> Work at RPE 7-8. Last 1-2 reps should be challenging. Progress by adding reps or weight when sets feel easier than RPE 7.';
            }
        }

        document.getElementById('equipment').addEventListener('change', updateDipBarsVisibility);
        document.getElementById('training-phase').addEventListener('change', updateRpeGuide);
        
        // Initialize
        updateDipBarsVisibility();
        updateRpeGuide();

        // =====================================================
        // LOCAL STORAGE
        // =====================================================

        function loadSettings() {
            try {
                const saved = localStorage.getItem('workoutGeneratorSettings');
                if (saved) {
                    const settings = JSON.parse(saved);
                    if (settings.goalEvent) document.getElementById('goal-event').value = settings.goalEvent;
                    if (settings.goalTime) document.getElementById('goal-time').value = settings.goalTime;
                    if (settings.trainingPhase) document.getElementById('training-phase').value = settings.trainingPhase;
                    if (settings.equipment) document.getElementById('equipment').value = settings.equipment;
                    if (settings.hasDipBars) document.getElementById('has-dip-bars').checked = settings.hasDipBars;
                    updateSplits();
                    updateDipBarsVisibility();
                    updateRpeGuide();
                }
            } catch (e) {
                // localStorage not available or corrupted, ignore
            }
        }

        function saveSettings() {
            try {
                const settings = {
                    goalEvent: document.getElementById('goal-event').value,
                    goalTime: document.getElementById('goal-time').value,
                    trainingPhase: document.getElementById('training-phase').value,
                    equipment: document.getElementById('equipment').value,
                    hasDipBars: document.getElementById('has-dip-bars').checked
                };
                localStorage.setItem('workoutGeneratorSettings', JSON.stringify(settings));
            } catch (e) {
                // localStorage not available, ignore
            }
        }

        // Save on change
        document.getElementById('goal-event').addEventListener('change', saveSettings);
        document.getElementById('goal-time').addEventListener('blur', saveSettings);
        document.getElementById('training-phase').addEventListener('change', saveSettings);
        document.getElementById('equipment').addEventListener('change', saveSettings);
        document.getElementById('has-dip-bars').addEventListener('change', saveSettings);

        // Load settings on page load
        loadSettings();

        // =====================================================
        // INFO TOGGLE
        // =====================================================

        function toggleInfo() {
            const content = document.getElementById('info-content');
            content.classList.toggle('hidden');
        }

        // =====================================================
        // RUNNING WORKOUTS
        // Paces anchored to goal, or effort-based where appropriate
        // =====================================================
        
        function getRunningWorkouts(goalEvent) {
            // Check if we have goal splits
            const hasGoal = currentGoal !== null;
            
            // Generate pace descriptors
            let goalPace400 = hasGoal ? formatTime(currentGoal.splits['400m']) : 'goal pace';
            let goalPace200 = hasGoal ? formatTime(currentGoal.splits['200m']) : 'goal pace';
            let goalPace600 = hasGoal ? formatTime(currentGoal.splits['600m']) : 'goal pace';
            let goalPace800 = hasGoal ? formatTime(currentGoal.splits['800m']) : 'goal pace';
            let fasterPace400 = hasGoal ? formatTime(currentGoal.fasterPer400) : '3-5s faster than goal';
            
            // Descriptive labels for workouts
            let goal400Label = hasGoal ? `${goalPace400} (goal ${goalEvent} pace)` : 'goal pace per 400m';
            let goal200Label = hasGoal ? `${goalPace200} (goal ${goalEvent} pace)` : 'goal pace per 200m';
            let faster400Label = hasGoal ? `${fasterPace400} (3-5s faster than goal)` : '3-5s faster than goal per 400m';

            // Event category for scaling
            let eventCategory;
            if (['800', '1500', 'mile'].includes(goalEvent)) {
                eventCategory = '800-mile';
            } else if (['3k', '5k', '10k'].includes(goalEvent)) {
                eventCategory = '5k-10k';
            } else {
                eventCategory = 'half';
            }

            // Goal-event specific scaling
            const eventScaling = {
                '800-mile': {
                    longRunMiles: '5-7',
                    longRunProgression: 6,
                    tempoMinutes: '15-20',
                    tempoCruiseReps: '4-5',
                    tempoCruiseDuration: '4:00',
                    hillSustainedReps: '5-6',
                    hillSustainedDuration: '1:30-2:00',
                    hillLongDuration: '2:00-2:30',
                    hillLadder: '0:45, 1:00, 1:30, 1:00, 0:45'
                },
                '5k-10k': {
                    longRunMiles: '8-11',
                    longRunProgression: 9,
                    tempoMinutes: '20-30',
                    tempoCruiseReps: '4-5',
                    tempoCruiseDuration: '5:00',
                    hillSustainedReps: '4-5',
                    hillSustainedDuration: '2:00-2:30',
                    hillLongDuration: '3:00-4:00',
                    hillLadder: '1:00, 2:00, 3:00, 2:00, 1:00'
                },
                'half': {
                    longRunMiles: '10-14',
                    longRunProgression: 12,
                    tempoMinutes: '25-40',
                    tempoCruiseReps: '4-6',
                    tempoCruiseDuration: '6:00',
                    hillSustainedReps: '3-4',
                    hillSustainedDuration: '2:30-3:00',
                    hillLongDuration: '4:00-5:00',
                    hillLadder: '1:30, 2:30, 4:00, 2:30, 1:30'
                }
            };

            const scale = eventScaling[eventCategory];

            return {
                'hill-power': [
                    {
                        name: "Short Hill Bombs",
                        details: "6-8 x 20-30 sec on a steep hill\nEffort: Near max (95%)\nRecovery: Walk down + 2 min standing",
                        notes: "Pure power. Full recovery between reps to maintain quality."
                    },
                    {
                        name: "Hill Accelerations",
                        details: "5-6 x 30-40 sec, building through each rep\nStart at 80%, finish at 95%\nRecovery: Walk down + 90 sec",
                        notes: "Submaximal start means slightly shorter recovery is fine. Focus on acceleration."
                    },
                    {
                        name: "Hill Sprint Ladder",
                        details: "15, 20, 25, 30, 25, 20, 15 sec\nEffort: 90-95% throughout\nRecovery: Walk down + 2 min (shorter reps), 2.5-3 min (longer reps)",
                        notes: "Scale recovery to rep length. The 30 sec rep needs the most rest."
                    },
                    {
                        name: "Power 10s",
                        details: "10 x 10-15 sec on the steepest hill you can find\nEffort: Absolute max\nRecovery: 2-3 min full recovery",
                        notes: "True neuromuscular work. Full recovery between reps to maintain max output."
                    },
                    {
                        name: "Broken Hill 200s",
                        details: "5 x 30-40 sec hard (approx 200m on steep grade)\nEffort: 90-95%\nRecovery: Walk down + 2.5 min",
                        notes: "Longer than a sprint, still power-dominant. Enough rest to repeat quality."
                    }
                ],
                'hill-sustained': [
                    {
                        name: "Threshold Climb Repeats",
                        details: `${scale.hillSustainedReps} x ${scale.hillSustainedDuration} on moderate grade\nEffort: Threshold (comfortably hard)\nRecovery: Jog down + 1 min standing`,
                        notes: "Should feel sustainable but honest. Practice pacing."
                    },
                    {
                        name: "Long Hill Tempo",
                        details: `3-4 x ${scale.hillLongDuration} on steady grade\nEffort: Strong but controlled (half marathon feel)\nRecovery: 4-5 min easy (jog down + extra rest)`,
                        notes: "Building sustained climbing capacity. Find your rhythm early."
                    },
                    {
                        name: "Climbing Ladder",
                        details: `${scale.hillLadder}\nEffort: Threshold throughout\nRecovery: Jog down + 1 min (~1:1 work:rest total)`,
                        notes: "The middle rep is the main event. Stay composed through it."
                    },
                    {
                        name: "Hill Cruise Intervals",
                        details: "6-8 x 90 sec on moderate hill\nEffort: 10K feel (hard but repeatable)\nRecovery: Jog down (~2 min total)",
                        notes: "Volume day. Effort should be honest but sustainable across all reps."
                    },
                    {
                        name: "Race Simulation",
                        details: "2 x 2:30-3:00 all-out on race-like grade\nEffort: Race effort (maximal sustainable)\nRecovery: 8-10 min between reps",
                        notes: "Closest thing to racing uphill. Very taxing—use sparingly."
                    }
                ],
                'track-pure-speed': [
                    {
                        name: "Fly 30s",
                        details: "6-8 x 30m fly (20m build-up + 30m max)\nEffort: Absolute max\nRecovery: Walk back + 3 min standing",
                        notes: "Pure top-end speed. Full recovery, max intent every rep."
                    },
                    {
                        name: "Acceleration 60s",
                        details: "6-8 x 60m from standing or 3-point start\nEffort: Max\nRecovery: Walk back + 3-4 min",
                        notes: "Work the drive phase. Patience out of the start, then unwind."
                    },
                    {
                        name: "150m Reps",
                        details: "5-6 x 150m at 95-100%\nRecovery: 6-8 min (walk back + standing rest)",
                        notes: "Speed endurance. Long enough to feel it, short enough to stay fast. If times drop >5%, stop or take more rest."
                    },
                    {
                        name: "Speed Ladder",
                        details: "60m, 80m, 100m, 120m, 100m, 80m, 60m\nEffort: Max or near-max throughout\nRecovery: Walk back + 3 min (60-80m), 4-5 min (100-120m)",
                        notes: "Full recovery between all reps. If speed drops noticeably, take more rest or stop."
                    },
                    {
                        name: "Broken 200",
                        details: "3-4 x (100m + 100m) with 30 sec between halves\n8-10 min between sets\nEffort: Race effort on both halves",
                        notes: "Simulates 200m with a micro-rest. Should feel like racing."
                    },
                    {
                        name: "Sprint-Float-Sprint 150s",
                        details: "5 x 150m as: 50m max, 50m float, 50m max\nRecovery: 5-6 min walk/stand",
                        notes: "Teaches relaxation at speed. The float is fast but smooth, not straining."
                    }
                ],
                'track-race-prep': [
                    {
                        name: "200m Sharpeners",
                        details: `8-10 x 200m at goal pace or slightly faster\nTarget: ${goal200Label}\nRecovery: 2 min walk/stand`,
                        notes: "Smooth and fast. These should feel controlled, not strained."
                    },
                    {
                        name: "300m Repeats",
                        details: `5-6 x 300m at 800m-mile effort\nTarget: goal 800m/mile pace per 300m\nRecovery: 2.5-3 min`,
                        notes: "The 300 is underrated. Long enough to hurt, short enough to stay fast."
                    },
                    {
                        name: "Fast 400s",
                        details: `5-6 x 400m at goal pace\nTarget: ${goal400Label}\nRecovery: 2.5-3 min`,
                        notes: "The bread and butter. Lock into goal pace and trust it."
                    },
                    {
                        name: "Speed Reserve 400s",
                        details: `4-5 x 400m faster than goal\nTarget: ${faster400Label}\nRecovery: 3-4 min`,
                        notes: "Building speed reserve. These should feel quick but in control."
                    },
                    {
                        name: "600m at Goal Pace",
                        details: `5-6 x 600m at goal pace\nTarget: ${hasGoal ? goalPace600 + ' (goal pace)' : 'goal pace per 600m'}\nRecovery: 3-4 min`,
                        notes: "Longer than 400s, same pace. Tests your ability to hold goal pace."
                    },
                    {
                        name: "Broken Race",
                        details: `4 x 400m at goal pace\nTarget: ${goal400Label}\nRecovery: 60 sec between reps`,
                        notes: "Short recovery simulates race fatigue. Should feel hard but achievable."
                    },
                    {
                        name: "Classic 800s",
                        details: "4-5 x 800m at 5K effort\nEffort: 5K feel (hard, sustainable for ~15-20 min)\nRecovery: 2.5-3 min jog/walk",
                        notes: "Controlled aggression—don't go out too fast. Feel-based effort."
                    },
                    {
                        name: "1000m Repeats",
                        details: "3-4 x 1000m at 5K effort\nEffort: 5K feel\nRecovery: 3-4 min",
                        notes: "Longer pieces. Stay patient early, close hard on each rep."
                    },
                    {
                        name: "Mixed Ladder",
                        details: `400, 600, 800, 600, 400\nEffort: Faster per meter as reps shorten (400s quicker than 800s)\nRecovery: 2-3 min between reps`,
                        notes: "Variety in one session. 400s around goal pace, 800s more like 5K-10K effort."
                    }
                ],
                'tempo': [
                    {
                        name: "Classic Tempo",
                        details: `${scale.tempoMinutes} min at threshold effort\nEffort: Comfortably hard (could hold ~45-60 min)\nTerrain: Flat or rolling`,
                        notes: "Short sentences possible, but not a conversation. Find a sustainable rhythm."
                    },
                    {
                        name: "Cruise Intervals",
                        details: `${scale.tempoCruiseReps} x ${scale.tempoCruiseDuration} at threshold\nRecovery: 60-90 sec jog`,
                        notes: "Broken tempo. Same stimulus, more mentally manageable."
                    },
                    {
                        name: "Tempo Sandwich",
                        details: "8 min tempo, 4 x 200m at 5K effort, 8 min tempo\nRecovery: 60 sec after each 200, 2 min before second tempo",
                        notes: "The 200s wake up the legs. Second tempo often feels better."
                    },
                    {
                        name: "Progression Run",
                        details: `30-40 min total:\n• First third: Easy (conversational)\n• Second third: Moderate (marathon feel)\n• Final third: Threshold (comfortably hard)`,
                        notes: "Finish faster than you start. The last segment is the work."
                    },
                    {
                        name: "Tempo with Surges",
                        details: "18-22 min tempo with 20-30 sec surge every 4 min\nSurge effort: 5K feel\nReturn to tempo immediately after",
                        notes: "Teaches mid-race moves. Surges are controlled, not all-out."
                    }
                ],
                'long-run': [
                    {
                        name: "Steady Long Run",
                        details: `${scale.longRunMiles} miles at conversational pace\nEffort: Easy (can speak in full sentences)\nTerrain: Your choice`,
                        notes: "The goal is to do it. Don't overthink pace—just get the miles in."
                    },
                    {
                        name: "Long Run with Late Pickup",
                        details: `${scale.longRunMiles} miles total\nFirst 75%: Easy\nLast 25%: Moderate effort (if feeling good)`,
                        notes: "The pickup is optional. If the legs aren't there, just finish easy."
                    },
                    {
                        name: "Progression Long Run",
                        details: `${scale.longRunProgression} miles in three segments:\n• Miles 1-${Math.floor(scale.longRunProgression/3)}: Easy\n• Miles ${Math.floor(scale.longRunProgression/3)+1}-${Math.floor(scale.longRunProgression*2/3)}: Moderate\n• Miles ${Math.floor(scale.longRunProgression*2/3)+1}-${scale.longRunProgression}: Comfortably hard`,
                        notes: "Each third slightly faster. Requires patience early."
                    },
                    {
                        name: "Fartlek Long Run",
                        details: `${scale.longRunMiles} miles total with surges:\nAfter 10-15 min warmup, alternate:\n2 min moderate-hard / 2 min easy\nRepeat 6-10x, then finish easy`,
                        notes: "Keep the 'on' segments honest but controlled—not racing. Adjust the ratio (1:1, 3:2, etc.) based on feel."
                    }
                ]
            };
        }

        // =====================================================
        // STRENGTH WORKOUTS
        // =====================================================

        const strengthWorkouts = {
            'upper': {
                'bars-dips': [
                    {
                        name: "Pull-up Pyramid + Dips",
                        details: "Pull-ups: 2, 4, 6, 8, 6, 4, 2 (38 total)\nDips: 3 x 10-12\nAlternate movements throughout",
                        notes: "Rest as needed. Pyramid keeps it interesting."
                    },
                    {
                        name: "EMOM Pull/Push",
                        details: "12 min EMOM alternating:\nOdd min: 6-8 pull-ups\nEven min: 8-10 dips",
                        notes: "Pick numbers you can sustain for all 6 rounds."
                    },
                    {
                        name: "Grip Variation Day",
                        details: "Wide pull-ups: 3 x 6-8\nChin-ups: 3 x 8-10\nClose-grip pull-ups: 2 x max\nDips: 3 x 10\nRest 60-90 sec between sets",
                        notes: "Different grips, different emphasis. Chin-ups for biceps."
                    },
                    {
                        name: "Volume Builder",
                        details: "50 pull-ups + 50 dips\nBreak into whatever sets you need\nAlternate movements",
                        notes: "Simple accumulation. Track your time if you want a benchmark."
                    },
                    {
                        name: "Slow Tempo Day",
                        details: "Pull-ups: 4 x 5 with 3-sec down, 1-sec pause at bottom\nDips: 4 x 6 with 3-sec down\nRest 90 sec between sets",
                        notes: "Control the eccentric. Harder than it looks."
                    }
                ],
                'bars-no-dips': [
                    {
                        name: "Pull-up Pyramid + Push-ups",
                        details: "Pull-ups: 2, 4, 6, 8, 6, 4, 2 (38 total)\nPush-ups: 3 x 15-20\nAlternate movements throughout",
                        notes: "Rest as needed. Pyramid keeps it interesting."
                    },
                    {
                        name: "EMOM Pull/Push",
                        details: "12 min EMOM alternating:\nOdd min: 6-8 pull-ups\nEven min: 12-15 push-ups",
                        notes: "Pick numbers you can sustain for all 6 rounds."
                    },
                    {
                        name: "Grip Variation + Pike",
                        details: "Wide pull-ups: 3 x 6-8\nChin-ups: 3 x 8-10\nClose-grip pull-ups: 2 x max\nPike push-ups: 3 x 10\nPush-ups: 2 x 15\nRest 60-90 sec between sets",
                        notes: "Different grips for pulling, pike push-ups for shoulder pressing stimulus."
                    },
                    {
                        name: "Volume Builder",
                        details: "50 pull-ups + 75 push-ups\nBreak into whatever sets you need\nAlternate movements",
                        notes: "Simple accumulation. Track your time if you want a benchmark."
                    },
                    {
                        name: "Slow Tempo Day",
                        details: "Pull-ups: 4 x 5 with 3-sec down, 1-sec pause at bottom\nDiamond push-ups: 4 x 10 with 2-sec down\nPike push-ups: 3 x 8\nRest 90 sec between sets",
                        notes: "Control the eccentric. Harder than it looks."
                    }
                ],
                'dumbbells': [
                    {
                        name: "Press & Row",
                        details: "DB Floor Press: 4 x 10-12\nDB Bent Over Row: 4 x 10-12 each arm\nDB Overhead Press: 3 x 8-10\nRest 60-90 sec between sets",
                        notes: "Alternate push and pull."
                    },
                    {
                        name: "Upper Circuit",
                        details: "3-4 rounds:\n10 DB Push Press\n12 Renegade Rows (6 each side)\n15 DB Curls\nRest 90 sec between rounds",
                        notes: "Keep moving but don't rush. Quality reps."
                    },
                    {
                        name: "Shoulder Emphasis",
                        details: "Arnold Press: 4 x 8-10\nDB Row: 4 x 10 each\nDB Lateral Raise: 3 x 12-15 (lighter)\nDB Reverse Fly: 3 x 12-15\nRest 60-90 sec between sets",
                        notes: "Shoulders get priority, but rows and reverse flys keep it balanced."
                    },
                    {
                        name: "Row & Press",
                        details: "DB Row: 4 x 10 each arm\nDB Floor Press: 4 x 10-12\nDB Reverse Fly: 3 x 12-15\nDB Overhead Press: 3 x 8-10\nRest 60-90 sec between sets",
                        notes: "Pulling and pressing balanced. Superset row/press to save time."
                    }
                ],
                'gym': [
                    {
                        name: "Barbell + Bodyweight",
                        details: "Bench Press: 4 x 6-8\nBarbell Row: 4 x 6-8\nPull-ups: 3 x max\nOverhead Press: 3 x 8-10\nDips: 3 x 10-12\nRest 90 sec-2 min between sets",
                        notes: "Heavy compounds plus bodyweight staples."
                    },
                    {
                        name: "Vertical Emphasis",
                        details: "Overhead Press: 4 x 6-8\nPull-ups: 4 x 8-10\nDips: 3 x 10-12\nBarbell or DB Row: 3 x 10\nRest 2 min after OHP, 90 sec otherwise",
                        notes: "Vertical push and pull get priority."
                    },
                    {
                        name: "Horizontal Emphasis",
                        details: "Barbell Row: 4 x 8\nBench Press: 4 x 8\nFace Pulls or Band Pull-aparts: 3 x 15\nDips: 3 x 10-12\nRest 90 sec-2 min between sets",
                        notes: "Horizontal push and pull get priority."
                    },
                    {
                        name: "Volume Day",
                        details: "Bench Press: 3 x 10\nPull-ups: 4 x 8-10\nOHP: 3 x 10\nCable or DB Row: 3 x 12\nTricep work: 2 x 15\nRest 60-90 sec between sets",
                        notes: "Moderate weight, more reps. Get a pump."
                    }
                ]
            },
            'lower': {
                'bars-dips': [
                    {
                        name: "Single-Leg Focus",
                        details: "Pistol squats: 3 x 5-8 each leg (use bar for balance if needed)\nBulgarian split squat (rear foot on bar): 3 x 10 each\nSingle-leg calf raise: 3 x 15 each\nGlute bridge: 3 x 15\nRest 60-90 sec between sets",
                        notes: "Unilateral work. Scale pistols as needed."
                    },
                    {
                        name: "Posterior Chain",
                        details: "Single-leg RDL: 4 x 8 each (bodyweight)\nGlute bridge: 3 x 15-20\nReverse lunge: 3 x 10 each leg\nCalf raises: 3 x 20\nRest 60 sec between sets",
                        notes: "Hamstrings and glutes. Balances quad-heavy hill work."
                    },
                    {
                        name: "Squat Endurance",
                        details: "Bodyweight squats: 25, 20, 15, 10\nJump squats: 5 reps between each BW set\nCossack squats: 2 x 8 each side\nGlute bridge: 2 x 15\nRest 60-90 sec between BW sets",
                        notes: "Higher volume. Jump squats add some power stimulus."
                    }
                ],
                'bars-no-dips': [
                    {
                        name: "Single-Leg Focus",
                        details: "Pistol squats: 3 x 5-8 each leg (use bar for balance if needed)\nBulgarian split squat (rear foot elevated): 3 x 10 each\nSingle-leg calf raise: 3 x 15 each\nGlute bridge: 3 x 15\nRest 60-90 sec between sets",
                        notes: "Unilateral work. Scale pistols as needed."
                    },
                    {
                        name: "Posterior Chain",
                        details: "Single-leg RDL: 4 x 8 each (bodyweight)\nGlute bridge: 3 x 15-20\nReverse lunge: 3 x 10 each leg\nCalf raises: 3 x 20\nRest 60 sec between sets",
                        notes: "Hamstrings and glutes. Balances quad-heavy hill work."
                    },
                    {
                        name: "Squat Endurance",
                        details: "Bodyweight squats: 25, 20, 15, 10\nJump squats: 5 reps between each BW set\nCossack squats: 2 x 8 each side\nGlute bridge: 2 x 15\nRest 60-90 sec between BW sets",
                        notes: "Higher volume. Jump squats add some power stimulus."
                    }
                ],
                'dumbbells': [
                    {
                        name: "DB Lower Builder",
                        details: "Goblet Squat: 4 x 10-12\nDB RDL: 4 x 10\nDB Bulgarian Split Squat: 3 x 8 each\nDB Calf Raise: 3 x 15\nRest 60-90 sec between sets",
                        notes: "Solid all-around. Go deep on goblet squats."
                    },
                    {
                        name: "Single-Leg Day",
                        details: "DB Step-ups: 4 x 8 each leg\nDB Single-leg RDL: 4 x 8 each\nDB Reverse Lunge: 3 x 10 each\nGoblet Squat: 2 x 15\nRest 60-90 sec between sets",
                        notes: "Unilateral emphasis for balance and stability."
                    },
                    {
                        name: "Hinge & Squat",
                        details: "DB RDL: 4 x 10\nGoblet Squat: 4 x 10-12\nDB Hip Thrust: 3 x 12\nDB Reverse Lunge: 3 x 8 each\nRest 60-90 sec between sets",
                        notes: "Posterior and anterior balanced."
                    }
                ],
                'gym': [
                    {
                        name: "Barbell Lower",
                        details: "Back Squat: 4 x 6-8\nRomanian Deadlift: 4 x 8\nBulgarian Split Squat: 3 x 8 each\nCalf Raises: 4 x 12\nRest 2 min after squats/RDL, 90 sec for accessories",
                        notes: "The standards. Prioritize squat and RDL."
                    },
                    {
                        name: "Squat Focus",
                        details: "Back Squat: 4 x 6-8\nRDL or Good Morning: 3 x 10\nFront Squat or Leg Press: 3 x 8-10\nHamstring Curl: 3 x 12\nRest 2 min after squats, 90 sec for accessories",
                        notes: "Squat is the priority, but posterior chain stays in the mix."
                    },
                    {
                        name: "Deadlift Day",
                        details: "Conventional or Sumo Deadlift: 4 x 5\nGoblet Squat or Front Squat: 3 x 10\nHip Thrust: 3 x 10\nWalking Lunges: 2 x 16 steps\nRest 2-3 min after deadlifts, 90 sec for accessories",
                        notes: "Deadlift is the priority, with squats and lunges for quad balance."
                    },
                    {
                        name: "Unilateral + Accessories",
                        details: "Bulgarian Split Squat: 4 x 8 each (barbell or DB)\nSingle-leg RDL: 3 x 10 each\nLeg Curl: 3 x 12\nCalf Raise: 4 x 15\nRest 60-90 sec between sets",
                        notes: "Single-leg focus. Good for addressing imbalances."
                    }
                ]
            },
            'full': {
                'bars-dips': [
                    {
                        name: "Bar Circuit",
                        details: "4 rounds:\n8 Pull-ups\n10 Dips\n10 Pistols or assisted pistols (total, not each)\n15 Air squats\nGlute bridge: 10\nRest 2 min between rounds",
                        notes: "Full body with bars. Scale as needed."
                    },
                    {
                        name: "Upper-Lower Alternating",
                        details: "Pull-ups: 4 x 8\nBulgarian Split Squat (foot on bar): 3 x 10 each\nDips: 4 x 10\nSingle-leg RDL: 3 x 8 each\nGlute bridge: 2 x 15\nRest 60-90 sec between sets",
                        notes: "Alternate upper and lower. Keeps rest productive."
                    },
                    {
                        name: "Quick AMRAP",
                        details: "AMRAP 15 min:\n5 Pull-ups\n10 Dips\n15 Air squats",
                        notes: "When time is short. Track total rounds."
                    }
                ],
                'bars-no-dips': [
                    {
                        name: "Bar Circuit",
                        details: "4 rounds:\n8 Pull-ups\n12 Push-ups\n6 Pike push-ups\n10 Pistols or assisted (total)\n15 Air squats\nRest 2 min between rounds",
                        notes: "Full body with pull-up bar only. Scale as needed."
                    },
                    {
                        name: "Upper-Lower Alternating",
                        details: "Pull-ups: 4 x 8\nBulgarian Split Squat: 3 x 10 each\nPush-ups: 3 x 15\nPike push-ups: 3 x 8\nSingle-leg RDL: 3 x 8 each\nGlute bridge: 2 x 15\nRest 60-90 sec between sets",
                        notes: "Alternate upper and lower. Keeps rest productive."
                    },
                    {
                        name: "Quick AMRAP",
                        details: "AMRAP 15 min:\n5 Pull-ups\n10 Push-ups\n5 Pike push-ups\n15 Air squats",
                        notes: "When time is short. Track total rounds."
                    }
                ],
                'dumbbells': [
                    {
                        name: "DB Full Body Classic",
                        details: "Goblet Squat: 3 x 12\nDB Row: 3 x 10 each\nDB Floor Press: 3 x 12\nDB RDL: 3 x 10\nDB Overhead Press: 3 x 10\nRest 60-90 sec between sets",
                        notes: "Hits everything. 25-30 min if you keep moving."
                    },
                    {
                        name: "DB Complex",
                        details: "5 rounds, don't put DBs down:\n6 DB Deadlifts\n6 DB Rows (each arm)\n6 DB Push Press\n6 DB Front Squats\nRest 2 min between rounds",
                        notes: "Continuous work within each round. Conditioning + strength."
                    },
                    {
                        name: "DB Upper-Lower Mix",
                        details: "DB Bulgarian Split Squat: 4 x 8 each\nDB Floor Press: 4 x 10\nDB Single-leg RDL: 3 x 8 each\nDB Row: 4 x 10 each\nDB Curl to Press: 2 x 10\nRest 60-90 sec between sets",
                        notes: "Alternating pattern. Good balance of everything."
                    }
                ],
                'gym': [
                    {
                        name: "Big Lifts + Accessories",
                        details: "Squat: 4 x 6\nBench Press: 4 x 6\nBarbell Row: 4 x 8\nRDL: 3 x 8\nPull-ups: 3 x max\nRest 2 min after squat/bench/row, 90 sec for accessories",
                        notes: "Compound lifts plus pull-ups. Efficient session."
                    },
                    {
                        name: "Push-Pull-Legs Circuit",
                        details: "3 rounds:\nOverhead Press: 8 reps\nPull-ups: 8 reps\nGoblet Squat: 10 reps\nDips: 10 reps\nDB RDL: 10 reps\nRest 2-3 min between rounds",
                        notes: "Everything gets hit. Good flow."
                    },
                    {
                        name: "Strength + Bodyweight",
                        details: "Deadlift: 4 x 5\nBench Press: 4 x 8\nPull-ups: 4 x 8-10\nBulgarian Split Squat: 3 x 8 each\nDips: 3 x 12\nRest 2-3 min after deadlift, 90 sec-2 min otherwise",
                        notes: "Barbell for big lifts, bodyweight for accessories."
                    },
                    {
                        name: "Quick Full Body",
                        details: "Back Squat: 3 x 8\nPull-ups: 3 x 10\nOHP: 3 x 8\nDB RDL: 3 x 10\nPush-ups: 2 x 20\nRest 90 sec between sets",
                        notes: "20-25 minutes. When time is tight but you want everything."
                    }
                ]
            }
        };

        // =====================================================
        // GENERATE FUNCTIONS
        // =====================================================

        function shuffle(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function generateRunning() {
            const type = document.getElementById('running-type').value;
            const goalEvent = document.getElementById('goal-event').value;
            const workouts = getRunningWorkouts(goalEvent)[type];
            const selected = shuffle(workouts).slice(0, 3);
            
            const resultsDiv = document.getElementById('running-results');
            resultsDiv.classList.remove('hidden');
            resultsDiv.innerHTML = `
                <div class="results-header">Pick one</div>
                ${selected.map(w => `
                    <div class="workout-option running-workout">
                        <div class="workout-name">${w.name}</div>
                        <div class="workout-details">${w.details}</div>
                        <div class="workout-notes">${w.notes}</div>
                    </div>
                `).join('')}
            `;
        }

        function generateStrength() {
            const type = document.getElementById('strength-type').value;
            let equipment = document.getElementById('equipment').value;
            
            // Check for dip bars if using bars equipment
            if (equipment === 'bars') {
                const hasDipBars = document.getElementById('has-dip-bars').checked;
                equipment = hasDipBars ? 'bars-dips' : 'bars-no-dips';
            }
            
            const workouts = strengthWorkouts[type][equipment];
            const numOptions = Math.min(3, workouts.length);
            const selected = shuffle(workouts).slice(0, numOptions);
            
            const resultsDiv = document.getElementById('strength-results');
            resultsDiv.classList.remove('hidden');
            resultsDiv.innerHTML = `
                <div class="results-header">Pick one</div>
                ${selected.map(w => `
                    <div class="workout-option strength-workout">
                        <div class="workout-name">${w.name}</div>
                        <div class="workout-details">${w.details}</div>
                        <div class="workout-notes">${w.notes}</div>
                    </div>
                `).join('')}
            `;
        }
    </script>
</body>
</html>
